<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <script src="../scripts/art.js"></script>
  <script src="../scripts/art.img"></script>
  <script src="../scripts/util.js"></script>
  <script src="../scripts/lightbox.js"></script>  

  <link rel="stylesheet" type="text/css" href="../main_board.css" />

  <title>fol</title>
</head>

<body>
  <div id='hey'></div>
  <div id="overlay" onclick="hideLightbox()">
    <div class="overlaycontent">
      <img src="" id="floater"></img>
      <div id="floaterlabel" class="note">
      </div>
    </div>  
  </div>
  <script>
    var html = "";
    var db = new Art(database).parse()
    var target = document.getElementById('hey')
    var filterTag = (location.search.split('filterTag=')[1] || '').split('&')[0]

    html += `<div id="board">`
    
    var eid = 0;
    html += `<div class="entrycontent">`
    
    for (id in db) {
      var entry = db[id];
      var tags
      var filter = false

      if (filterTag != "") {
        filter = true
      }

      if ("TAGS" in entry) {
        tags = entry["TAGS"].split(" ")
        if (tags.includes(filterTag)) {
          filter = false
        }
      }

      // ENTRY START 
      if (!filter) {
        var src = `images/${entry["IMG"]}`;
        html += `<a href="#" onClick="pushImage(${id})">`;
        
        html += `<img src="${src}" class="thumb" width=400px ></img>`;

        html += `</a>`;
        // if ("TAGS" in entry) {
        //   for (var i = 0; i < tags.length; i++) {
        //     html += `<a class="tag" href="${location.pathname + "?filterTag=" + tags[i]}">${tags[i].toUpperCase()}</a> `
        //   }
        // }
        // html += `<div class="bar" width=30 height=30></div>`
      }
      eid++;
    }

    html += `</div>`
    html += `</div>`
    html += `<br> <hr>`
    html += new Date().toTimeString()

    target.innerHTML = html

  </script>
</body>

</html>